(this["webpackJsonpmister-bitcoin"]=this["webpackJsonpmister-bitcoin"]||[]).push([[0],{43:function(e,t,n){e.exports=n(72)},48:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),c=n.n(o),s=n(8),i=n(9),u=n(12),l=n(10),m=n(13),p=(n(48),n(18)),d=n(2),h=n.n(d),f=n(39),v=n.n(f),g={getRate:function(e){var t;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(v.a.get("https://blockchain.info/tobtc?currency=USD&value=".concat(e)));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))}};var b={loadFromStorage:function(e){var t=localStorage.getItem(e);return JSON.parse(t)},saveToStorage:function(e,t){var n=JSON.stringify(t);localStorage.setItem(e,n)}};var E,C="user",y={getUser:function(){E||(E=b.loadFromStorage(C));return E},signup:function(e){return E={name:e,coins:100,moves:[]},b.saveToStorage(C,E),E},addMove:function(e,t){E||(E=b.loadFromStorage(C));return E.moves.unshift({toId:e._id,to:e.name,at:Date.now(),amount:t}),E.coins-=t,b.saveToStorage(C,E),E}};var w=function(){return function(e){var t=y.getUser();return e(j(t))}},j=function(e){return{type:"SET_USER",user:e}},O=n(11);function _(e){var t=e.move;return r.a.createElement("section",{className:"move-preview"},r.a.createElement("p",null,r.a.createElement("span",null,"At: "),function(){var e=new Date(t.at),n=e.toLocaleDateString("en-GB"),a=e.toLocaleTimeString("en-GB");return"".concat(n,", ").concat(a)}()),r.a.createElement("p",null,r.a.createElement("span",null,"Amount: "),t.amount," coins"))}function T(e){var t=e.title,n=e.moves;return n&&n.length?r.a.createElement("section",{className:"move-list"},r.a.createElement("h1",null,t),n.map((function(e,t){return r.a.createElement(_,{key:t,move:e})}))):r.a.createElement("section",{className:"no-moves"},"No transfers yet...")}var S=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={rate:null},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.props.loadUser(),e=this.props.user){n.next=5;break}return this.props.history.push("/signup"),n.abrupt("return");case 5:return n.next=7,h.a.awrap(g.getRate(e.coins));case 7:t=n.sent,this.setState({rate:t});case 9:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state.rate,t=this.props.user;return t?r.a.createElement("section",{className:"home-page"},r.a.createElement("h1",null,"Hello, ",t.name),r.a.createElement("h2",null,"Current Balance:"),r.a.createElement("h3",null,"Bit: \u20bf ",t.coins),r.a.createElement("h3",null,"USD: $ ",e),r.a.createElement(T,{title:"Your Last Moves",moves:t.moves.slice(0,3)})):r.a.createElement("div",null,"Something went wrong...")}}]),t}(r.a.Component),x={loadUser:w},N=Object(O.b)((function(e){return{user:e.user.user}}),x)(S),k=n(3),A={getContacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(t,n){var a,r=M;e&&e.term&&(a=(a=e.term).toLocaleLowerCase(),r=M.filter((function(e){return e.name.toLocaleLowerCase().includes(a)||e.phone.toLocaleLowerCase().includes(a)||e.email.toLocaleLowerCase().includes(a)}))),t(r.sort((function(e,t){return e.name.toLocaleLowerCase()<t.name.toLocaleLowerCase()?-1:e.name.toLocaleLowerCase()>t.name.toLocaleLowerCase()?1:0})))}))},getContactById:function(e){return new Promise((function(t,n){var a=M.find((function(t){return t._id===e}));a?t(a):n("Contact id ".concat(e," not found!"))}))},removeContact:function(e){return new Promise((function(t,n){var a=M.findIndex((function(t){return t._id===e}));-1!==a&&M.splice(a,1),t(M)}))},saveContact:function(e){return e._id?function(e){return new Promise((function(t,n){var a=M.findIndex((function(t){return e._id===t._id}));-1!==a&&(M[a]=e),t(e)}))}(e):function(e){return new Promise((function(t,n){e._id=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}();var a=Math.random>.5?"men":"women";e.img="https://randomuser.me/api/portraits/".concat(a,"/").concat(M.length+1,".jpg"),M.push(e),t(e)}))}(e)},getEmptyContact:function(){return{name:"",email:"",phone:""}}},M=[{_id:"5a56640269f443a5d64b32ca",name:"Ochoa Hyde",email:"ochoahyde@renovize.com",phone:"+1 (968) 593-3824",img:"https://randomuser.me/api/portraits/men/1.jpg"},{_id:"5a5664025f6ae9aa24a99fde",name:"Hallie Mclean",email:"halliemclean@renovize.com",phone:"+1 (948) 464-2888",img:"https://randomuser.me/api/portraits/women/2.jpg"},{_id:"5a56640252d6acddd183d319",name:"Parsons Norris",email:"parsonsnorris@renovize.com",phone:"+1 (958) 502-3495",img:"https://randomuser.me/api/portraits/men/3.jpg"},{_id:"5a566402ed1cf349f0b47b4d",name:"Rachel Lowe",email:"rachellowe@renovize.com",phone:"+1 (911) 475-2312",img:"https://randomuser.me/api/portraits/women/4.jpg"},{_id:"5a566402abce24c6bfe4699d",name:"Dominique Soto",email:"dominiquesoto@renovize.com",phone:"+1 (807) 551-3258",img:"https://randomuser.me/api/portraits/men/4.jpg"},{_id:"5a566402a6499c1d4da9220a",name:"Shana Pope",email:"shanapope@renovize.com",phone:"+1 (970) 527-3082",img:"https://randomuser.me/api/portraits/women/6.jpg"},{_id:"5a566402f90ae30e97f990db",name:"Faulkner Flores",email:"faulknerflores@renovize.com",phone:"+1 (952) 501-2678",img:"https://randomuser.me/api/portraits/women/3.jpg"},{_id:"5a5664027bae84ef280ffbdf",name:"Holder Bean",email:"holderbean@renovize.com",phone:"+1 (989) 503-2663",img:"https://randomuser.me/api/portraits/women/8.jpg"},{_id:"5a566402e3b846c5f6aec652",name:"Rosanne Shelton",email:"rosanneshelton@renovize.com",phone:"+1 (968) 454-3851",img:"https://randomuser.me/api/portraits/men/9.jpg"},{_id:"5a56640272c7dcdf59c3d411",name:"Pamela Nolan",email:"pamelanolan@renovize.com",phone:"+1 (986) 545-2166",img:"https://randomuser.me/api/portraits/women/10.jpg"},{_id:"5a5664029a8dd82a6178b15f",name:"Roy Cantu",email:"roycantu@renovize.com",phone:"+1 (929) 571-2295",img:"https://randomuser.me/api/portraits/men/11.jpg"},{_id:"5a5664028c096d08eeb13a8a",name:"Ollie Christian",email:"olliechristian@renovize.com",phone:"+1 (977) 419-3550",img:"https://randomuser.me/api/portraits/women/12.jpg"},{_id:"5a5664026c53582bb9ebe9d1",name:"Nguyen Walls",email:"nguyenwalls@renovize.com",phone:"+1 (963) 471-3181",img:"https://randomuser.me/api/portraits/men/13.jpg"},{_id:"5a56640298ab77236845b82b",name:"Glenna Santana",email:"glennasantana@renovize.com",phone:"+1 (860) 467-2376",img:"https://randomuser.me/api/portraits/women/14.jpg"},{_id:"5a56640208fba3e8ecb97305",name:"Malone Clark",email:"maloneclark@renovize.com",phone:"+1 (818) 565-2557",img:"https://randomuser.me/api/portraits/men/15.jpg"},{_id:"5a566402abb3146207bc4ec5",name:"Floyd Rutledge",email:"floydrutledge@renovize.com",phone:"+1 (807) 597-3629",img:"https://randomuser.me/api/portraits/women/15.jpg"},{_id:"5a56640298500fead8cb1ee5",name:"Grace James",email:"gracejames@renovize.com",phone:"+1 (959) 525-2529",img:"https://randomuser.me/api/portraits/men/17.jpg"},{_id:"5a56640243427b8f8445231e",name:"Tanner Gates",email:"tannergates@renovize.com",phone:"+1 (978) 591-2291",img:"https://randomuser.me/api/portraits/women/18.jpg"},{_id:"5a5664025c3abdad6f5e098c",name:"Lilly Conner",email:"lillyconner@renovize.com",phone:"+1 (842) 587-3812",img:"https://randomuser.me/api/portraits/men/19.jpg"}];var L=function(e){return function(t){var n;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(A.getContactById(e));case 2:return n=a.sent,a.abrupt("return",t(z(n)));case 4:case"end":return a.stop()}}))}},z=function(e){return{type:"SET_CURR_CONTACT",contact:e}},U=function(e){return{type:"SET_CONTACTS",contacts:e}},D=function(e){return{type:"SAVE_CONTACT",contact:e}},P=function(e){return{type:"DELETE_CONTACT",id:e}};function R(e){var t=e.contact;return r.a.createElement("section",{className:"contact-preview"},r.a.createElement("img",{src:t.img,alt:t.name}),r.a.createElement("h3",null,t.name))}var B=function(e){var t=e.contacts;return r.a.createElement("section",{className:"contact-list flex-center column"},t.map((function(e,t){return r.a.createElement(k.b,{to:"/contact/".concat(e._id),key:t},r.a.createElement(R,{contact:e}))})))};function I(e){var t=e.handleFilter;return r.a.createElement("input",{type:"text",onChange:function(e){return t(e.target.value)},placeholder:"Search"})}var F=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleFilter=function(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t={term:e},n.props.loadContacts(t);case 2:case"end":return a.stop()}}))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.loadUser(),this.props.user?this.props.loadContacts():this.props.history.push("/signup")}},{key:"render",value:function(){var e=this.props.contacts;return e?r.a.createElement("section",{className:"contact-page flex-center column"},r.a.createElement(I,{handleFilter:this.handleFilter}),r.a.createElement(k.b,{to:"/contact/edit"},"Add new contact"),r.a.createElement(B,{contacts:e})):r.a.createElement("div",null,"no contacts")}}]),t}(r.a.Component),H={loadContacts:function(e){return function(t){var n;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(A.getContacts(e));case 2:return n=a.sent,a.abrupt("return",t(U(n)));case 4:case"end":return a.stop()}}))}},loadUser:w},G=Object(O.b)((function(e){return{contacts:e.contact.contacts,user:e.user.user}}),H)(F);function J(e){var t=e.contact,n=e.updateAmount,a=e.addMove;return r.a.createElement("section",{className:"transfer-fund"},r.a.createElement("h3",null,"Transfer coins to ",t.name,":"),r.a.createElement("form",{onSubmit:a},r.a.createElement("div",null,"Amount: ",r.a.createElement("input",{type:"number",min:"1",onChange:n})),r.a.createElement("button",{type:"submit"},"Transfer")))}var W=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={amount:null,movesToContact:[]},n.updateAmount=function(e){var t=e.target.value;n.setState({amount:t})},n.addMove=function(e){e.preventDefault();var t=n.props.contact,a=n.state.amount;n.props.addMove(t,a),n.getMovesToContact()},n.getMovesToContact=function(){var e=n.props.user.moves,t=n.props.contact;if(e&&e.length){var a=e.filter((function(e){return e.toId===t._id}));n.setState({movesToContact:a})}},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.awrap(this.props.loadUser());case 2:if(this.props.user){t.next=5;break}return this.props.history.push("/signup"),t.abrupt("return");case 5:return e=this.props.match.params.id,t.next=8,h.a.awrap(this.props.loadCurrContact(e));case 8:this.getMovesToContact();case 9:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this.props.contact,t=this.state.movesToContact;return e?r.a.createElement("section",{className:"contact-details"},r.a.createElement("div",{className:"nav"},r.a.createElement(k.b,{to:"/contact"},"Back"),r.a.createElement(k.b,{to:"/contact/edit/".concat(e._id)},"Edit")),r.a.createElement("h3",null,"Name: ",e.name),r.a.createElement("h3",null,"Phone: ",e.phone),r.a.createElement("h3",null,"Email: ",e.email),r.a.createElement(J,{contact:e,addMove:this.addMove,updateAmount:this.updateAmount}),r.a.createElement(T,{moves:t,title:"Your Moves"})):r.a.createElement("h1",null,"Unknown contact")}}]),t}(r.a.Component),q={loadCurrContact:L,loadUser:w,addMove:function(e,t){return function(n){var a=y.addMove(e,t);return n(j(a))}}},V=Object(O.b)((function(e){return{contact:e.contact.currContact,user:e.user.user}}),q)(W),Y=n(24),$=n(17),K=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={contact:{name:"",email:"",phone:""},isNew:!0},n.updateContact=function(e,t){var a=e.target.value;n.setState((function(e){return{contact:Object($.a)({},e.contact,Object(Y.a)({},t,a))}}))},n.saveContact=function(e){return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,h.a.awrap(n.props.saveContact(n.state.contact));case 3:n.goToContactPage();case 4:case"end":return t.stop()}}))},n.removeContact=function(){return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.awrap(n.props.removeContact(n.state.contact._id));case 2:n.goToContactPage();case 3:case"end":return e.stop()}}))},n.goToContactPage=function(){n.props.history.push("/contact")},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){if(this.props.loadUser(),this.props.user){var e=this.props.match.params.id;e&&(this.props.loadCurrContact(e),this.setState({contact:this.props.contact,isNew:!1}))}else this.props.history.push("/signup")}},{key:"render",value:function(){var e=this,t=this.state,n=t.contact,a=t.isNew;return r.a.createElement("section",{className:"contact-edit"},r.a.createElement("div",{className:"actions"},r.a.createElement(k.b,{to:"/contact/".concat(n._id)},"Back"),!a&&r.a.createElement("button",{onClick:this.removeContact},"Delete")),r.a.createElement("form",{onSubmit:this.saveContact,className:"flex-center column"},r.a.createElement("label",null," Name:",r.a.createElement("input",{type:"text",value:n.name,onChange:function(t){return e.updateContact(t,"name")}})),r.a.createElement("label",null," Phone:",r.a.createElement("input",{type:"text",value:n.phone,onChange:function(t){return e.updateContact(t,"phone")}})),r.a.createElement("label",null," Email:",r.a.createElement("input",{type:"email",value:n.email,onChange:function(t){return e.updateContact(t,"email")}})),r.a.createElement("button",{type:"submit"},"Done")))}}]),t}(r.a.Component),Q={loadCurrContact:L,saveContact:function(e){return function(t){var n;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(A.saveContact(e));case 2:return n=a.sent,a.abrupt("return",t(D(n)));case 4:case"end":return a.stop()}}))}},removeContact:function(e){return function(t){return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(A.removeContact(e));case 2:return n.abrupt("return",t(P(e)));case 3:case"end":return n.stop()}}))}},loadUser:w},X=Object(O.b)((function(e){return{contact:e.contact.currContact,user:e.user.user}}),Q)(K);function Z(){return r.a.createElement("section",{className:"header flex space-between align-center"},r.a.createElement("h1",null,"Mister ",r.a.createElement("span",null,"\u20bf"),"itcoin"),r.a.createElement("nav",{className:"flex-center"},r.a.createElement(k.b,{to:"/"},"Home"),r.a.createElement(k.b,{to:"/contact"},"Contacts")))}var ee=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={userName:null},n.updateName=function(e){var t=e.target.value;n.setState({userName:t})},n.signup=function(e){e.preventDefault(),n.props.signup(n.state.userName),n.goToHomePage()},n.goToHomePage=function(){n.props.history.push("/")},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.loadUser(),this.props.user&&this.goToHomePage()}},{key:"render",value:function(){return r.a.createElement("section",{className:"signup-page"},r.a.createElement("h3",null,"Please type your name to continue"),r.a.createElement("form",{onSubmit:this.signup},r.a.createElement("input",{type:"text",onChange:this.updateName}),r.a.createElement("button",null,"Submit")))}}]),t}(r.a.Component),te={signup:function(e){return function(t){var n=y.signup(e);return t(j(n))}},loadUser:w},ne=Object(O.b)((function(e){return{user:e.user.user}}),te)(ee),ae=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Z,null),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:N}),r.a.createElement(p.a,{exact:!0,path:"/contact",component:G}),r.a.createElement(p.a,{exact:!0,path:"/contact/edit/:id?",component:X}),r.a.createElement(p.a,{exact:!0,path:"/contact/:id",component:V}),r.a.createElement(p.a,{exact:!0,path:"/signup",component:ne})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re,oe=n(19),ce=n(42),se=n(21),ie={currContact:null,contacts:[]};var ue={user:null};var le=Object(oe.c)({contact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURR_CONTACT":return Object($.a)({},e,{currContact:t.contact});case"SET_CONTACTS":return Object($.a)({},e,{contacts:t.contacts});case"SAVE_CONTACT":return re=e.contacts.findIndex((function(e){return e._id===t.contact._id})),Object($.a)({},e,{contacts:[].concat(Object(se.a)(e.contacts.slice(0,re)),[t.contact],Object(se.a)(e.contacts.slice(re+1)))});case"DELETE_CONTACT":return re=e.contacts.findIndex((function(e){return e._id===t.id})),Object($.a)({},e,{contacts:[].concat(Object(se.a)(e.contacts.slice(0,re)),Object(se.a)(e.contacts.slice(re+1)))});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object($.a)({},e,{user:t.user});default:return e}}}),me=Object(oe.d)(le,Object(oe.a)(ce.a)),pe=n(5),de=Object(pe.a)();c.a.render(r.a.createElement(O.a,{store:me},r.a.createElement(k.a,{history:de},r.a.createElement(ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[43,1,2]]]);
//# sourceMappingURL=main.58c02068.chunk.js.map